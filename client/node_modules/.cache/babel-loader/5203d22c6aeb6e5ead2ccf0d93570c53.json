{"remainingRequest":"/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/babel-loader/lib/index.js!/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/arlav/Documents/GitHub/ArtToken/client/src/components/AddArtItem.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/arlav/Documents/GitHub/ArtToken/client/src/components/AddArtItem.vue","mtime":1606592072100},{"path":"/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/arlav/Documents/GitHub/ArtToken/client/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMvYXJsYXYvRG9jdW1lbnRzL0dpdEh1Yi9BcnRUb2tlbi9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyByZWYgfSBmcm9tICJ2dWUiOwppbXBvcnQgeyBwYXJzZUV0aGVyIH0gZnJvbSAiZXRoZXJzL2xpYi91dGlscyI7CmltcG9ydCB7IFVzZUlQRlNDbGllbnQgfSBmcm9tICJAL3BsdWdpbnMvaXBmc0h0dHBDbGllbnQiOwppbXBvcnQgeyBVc2VFdGhlcnMgfSBmcm9tICJAL3BsdWdpbnMvZXRoZXJzIjsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBldGhlcnMgPSBVc2VFdGhlcnMoKTsKICAgIHZhciBpcGZzID0gVXNlSVBGU0NsaWVudCgpOwogICAgdmFyIHByaWNlID0gcmVmKG51bGwpOwogICAgdmFyIGFydEl0ZW0gPSByZWYobnVsbCk7CgogICAgdmFyIG9uQXJ0U2VsZWN0aW9uID0gZnVuY3Rpb24gb25BcnRTZWxlY3Rpb24oKSB7CiAgICAgIGFydEl0ZW0udmFsdWUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICB9OwoKICAgIHZhciBhZGRBcnRJdGVtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRpcGZzJGFkZCwgcGF0aCwgdG9rZW5VUkksIHBhcnNlZFByaWNlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBpcGZzLmFkZChhcnRJdGVtLnZhbHVlKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJGlwZnMkYWRkID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHBhdGggPSBfeWllbGQkaXBmcyRhZGQucGF0aDsKCiAgICAgICAgICAgICAgICBpZiAocGF0aCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJGYWlsZWQgdG8gYWRkIGFydCBpdGVtIHRvIElQRlMiKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdG9rZW5VUkkgPSAiaHR0cHM6Ly9pcGZzLmlvL2lwZnMvIi5jb25jYXQocGF0aCk7CiAgICAgICAgICAgICAgICBwYXJzZWRQcmljZSA9IHBhcnNlRXRoZXIocHJpY2UudmFsdWUudG9TdHJpbmcoKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gZXRoZXJzLmFkZEFydEl0ZW0ocGFyc2VkUHJpY2UsIHRva2VuVVJJKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vIGNsZWFyIGlucHV0CiAgICAgICAgICAgICAgICBwcmljZS52YWx1ZSA9IG51bGw7CiAgICAgICAgICAgICAgICBhcnRJdGVtLnZhbHVlID0gbnVsbDsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gYWRkQXJ0SXRlbSgpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIHByaWNlOiBwcmljZSwKICAgICAgYXJ0SXRlbTogYXJ0SXRlbSwKICAgICAgb25BcnRTZWxlY3Rpb246IG9uQXJ0U2VsZWN0aW9uLAogICAgICBhZGRBcnRJdGVtOiBhZGRBcnRJdGVtCiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/Users/arlav/Documents/GitHub/ArtToken/client/src/components/AddArtItem.vue"],"names":[],"mappings":";;;;AAeA,SAAS,GAAT,QAAoB,KAApB;AACA,SAAS,UAAT,QAA2B,kBAA3B;AAEA,SAAS,aAAT,QAA8B,0BAA9B;AACA,SAAS,SAAT,QAA0B,kBAA1B;AAEA,eAAe;AACd,EAAA,KADc,mBACN;AACP,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,IAAG,GAAI,aAAa,EAA1B;AAEA,QAAM,KAAI,GAAI,GAAG,CAAC,IAAD,CAAjB;AACA,QAAM,OAAM,GAAI,GAAG,CAAC,IAAD,CAAnB;;AAEA,QAAM,cAAa,GAAI,SAAjB,cAAiB,GAAM;AAC5B,MAAA,OAAO,CAAC,KAAR,GAAgB,KAAK,CAAC,MAAN,CAAa,KAAb,CAAmB,CAAnB,CAAhB;AACA,KAFD;;AAIA,QAAM,UAAS;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACK,IAAI,CAAC,GAAL,CAAS,OAAO,CAAC,KAAjB,CADL;;AAAA;AAAA;AACV,gBAAA,IADU,mBACV,IADU;;AAAA,oBAEb,IAFa;AAAA;AAAA;AAAA;;AAAA,sBAED,IAAI,KAAJ,CAAU,gCAAV,CAFC;;AAAA;AAIZ,gBAAA,QAJY,kCAIuB,IAJvB;AAKZ,gBAAA,WALY,GAKE,UAAU,CAAC,KAAK,CAAC,KAAN,CAAY,QAAZ,EAAD,CALZ;AAAA;AAAA,uBAMZ,MAAM,CAAC,UAAP,CAAkB,WAAlB,EAA+B,QAA/B,CANY;;AAAA;AAQlB;AACA,gBAAA,KAAK,CAAC,KAAN,GAAc,IAAd;AACA,gBAAA,OAAO,CAAC,KAAR,GAAgB,IAAhB;;AAVkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAT,UAAS;AAAA;AAAA;AAAA,OAAf;;AAaA,WAAO;AACN,MAAA,KAAK,EAAL,KADM;AAEN,MAAA,OAAO,EAAP,OAFM;AAGN,MAAA,cAAc,EAAd,cAHM;AAIN,MAAA,UAAS,EAAT;AAJM,KAAP;AAMD;AA/Bc,CAAf","sourcesContent":["<template>\n  <section class=\"add-art-item-container\">\n    <input type=\"number\" v-model=\"price\" placeholder=\"Price\" />\n    <label v-if=\"!artItem\" class=\"add-art-item-label\">\n      <input type=\"file\" accept=\"image/*\" @change=\"onArtSelection\" />\n      Add Art\n    </label>\n\n    <button v-else @click=\"addArtItem()\">\n      Publish\n    </button>\n  </section>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { parseEther } from \"ethers/lib/utils\";\n\nimport { UseIPFSClient } from \"@/plugins/ipfsHttpClient\";\nimport { UseEthers } from \"@/plugins/ethers\";\n\nexport default {\n\tsetup() {\n\t\tconst ethers = UseEthers();\n\t\tconst ipfs = UseIPFSClient();\n\n\t\tconst price = ref(null);\n\t\tconst artItem = ref(null);\n\n\t\tconst onArtSelection = () => {\n\t\t\tartItem.value = event.target.files[0];\n\t\t};\n\n\t\tconst addArtItem = async () => {\n\t\t\tconst { path } = await ipfs.add(artItem.value);\n\t\t\tif (!path) throw new Error(\"Failed to add art item to IPFS\");\n\n\t\t\tconst tokenURI = `https://ipfs.io/ipfs/${path}`;\n\t\t\tconst parsedPrice = parseEther(price.value.toString());\n\t\t\tawait ethers.addArtItem(parsedPrice, tokenURI);\n\n\t\t\t// clear input\n\t\t\tprice.value = null;\n\t\t\tartItem.value = null;\n\t\t};\n\n\t\treturn {\n\t\t\tprice,\n\t\t\tartItem,\n\t\t\tonArtSelection,\n\t\t\taddArtItem\n\t\t};\n\t}\n};\n</script>\n\n<style scoped>\n.add-art-item-container {\n  padding: 40px;\n}\n\n.add-art-item-container input {\n  padding: 10px;\n}\n\n.add-art-item-label {\n  background-color: #ee4540;\n  padding: 8px 12px;\n  cursor: pointer;\n  font-size: 1em;\n  font-weight: bold;\n  vertical-align: middle;\n}\n\ninput[type=\"file\"] {\n  display: none;\n}\n</style>\n"],"sourceRoot":""}]}